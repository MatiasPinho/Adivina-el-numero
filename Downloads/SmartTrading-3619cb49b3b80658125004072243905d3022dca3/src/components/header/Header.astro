---
import LogoMobile from "../../icons/SmartMobile.astro";
import LogoDestokp from "../../icons/SmartDestokp.astro";
import LinkButtons from "../buttons/LinkButtons.astro";
---

<script>
  /* Logic handdleMenu */
  const menuElement = document.querySelector(".menu");
  const navUlElement = document.querySelector(".nav__ul");
  const navLiElement = document.querySelectorAll(".nav__ul__link");
  const navNavegatorSelect = document.querySelector(".active");
  const navLiArray = Array.from(navLiElement);

  const toggleMenu = () => {
    menuElement.classList.toggle("menu--open");
    navUlElement.classList.toggle("nav__ul--open");
  };
  function reset() {
    navLiArray.forEach((li) => {
      navNavegatorSelect.classList.remove(
        "active--home",
        "active--about",
        "active--dashboard",
        "active--contact",
        "active--hidden"
      );
    });
    if (navNavegatorSelect.classList.contains("active")) {
      return;
    } else {
      navNavegatorSelect.classList.add("active");
    }
  }

  function handleScroll() {
    console.log(scrollY);
    navLiArray.forEach((li, index) => {
      if (scrollY < 600 && index === 0) {
        reset();
        navNavegatorSelect.classList.add("active--home");
      }

      if (scrollY >= 450 && index === 1) {
        reset();
        navNavegatorSelect.classList.add("active--about");
      }

      if (scrollY >= 1300 && index === 2) {
        reset();
        navNavegatorSelect.classList.add("active--dashboard");
      }

      if (scrollY >= 1990) {
        navNavegatorSelect.classList.add("active--hidden");
      }
    });
  }

  // Add scroll event listener
  window.addEventListener("scroll", handleScroll);

  // Add mouseover event listeners to each li
  navLiArray.forEach((li, index) => {
    li.addEventListener("mouseout", () => {
      reset();
    });

    li.addEventListener("mouseover", () => {
      reset();
      switch (index) {
        case 0:
          navNavegatorSelect.classList.add("active--home");
          break;
        case 1:
          navNavegatorSelect.classList.add("active--about");
          break;
        case 2:
          navNavegatorSelect.classList.add("active--dashboard");
          break;
        case 3:
          break;
        default:
          break;
      }
    });
  });

  menuElement.addEventListener("click", toggleMenu);
</script>

<header class="header">
  <nav class="nav">
    <LogoMobile />
    <LogoDestokp />
    <div class="menu">
      <div class="menu__item"></div>
      <div class="menu__item"></div>
      <div class="menu__item"></div>
    </div>
    <ul class="nav__ul">
      <div class="active"></div>
      <li class="nav__ul__li">
        <a class="nav__ul__link" href="#">Inicio</a>
      </li>
      <li class="nav__ul__li">
        <a class="nav__ul__link" href="#services-id">Soluciones</a>
      </li>
      <li class="nav__ul__li">
        <a class="nav__ul__link" href="#project-id">Dashboard</a>
      </li>
      <li class="nav__ul__li">
        <LinkButtons content="Contacto" href="#contact-id" />
      </li>
    </ul>
  </nav>
</header>

<style>
  .header {
    position: fixed;
    padding: 50px 0;
    background-color: var(--transparent);
    z-index: 10;
    width: 100%;
    height: 75px;
  }

  .nav {
    position: relative;
    display: flex;
    justify-content: space-between;
    align-items: center;
    max-width: 75rem;
    padding: 0 1rem;
    height: 100%;
    margin: 0 auto;
  }

  .menu {
    position: relative;
    display: block;
    width: 40px;
    cursor: pointer;
  }

  .menu__item {
    width: 100%;
    height: 3.5px;
    margin: 10px 0;
    border-radius: 20px;
    background-color: var(--primary);
    transition: transform 0.9s;
  }

  .menu.menu--open .menu__item:nth-child(1) {
    transform: rotate(-45deg) translate(-10px, 5px);
  }

  .menu.menu--open .menu__item:nth-child(2) {
    opacity: 0;
  }

  .menu.menu--open .menu__item:nth-child(3) {
    transform: rotate(44deg) translate(-12px, -8px);
  }

  .nav__ul {
    position: fixed;
    top: 0;
    right: -103%;
    width: 100%;
    height: 100%;
    display: flex;
    gap: 45px;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    margin-top: 100px;
    background-color: var(--transparent);
    transition: right 0.9s;
  }

  .nav__ul--open {
    right: 0;
  }

  .nav__ul__link {
    font-size: 2rem;
    color: var(--background);
  }

  .active {
    position: absolute;
    left: 21px;
    bottom: 8px;
    width: 51px;
    height: 2px;
    background-color: var(--secondary);
    transition:
      width 0.7s,
      left 0.7s,
      opacity 1s;
  }

  .active--home {
    left: 21px;
    width: 51px;
  }

  .active--about {
    left: 119px;
    width: 95px;
  }

  .active--dashboard {
    left: 264px;
    width: 95px;
  }

  .active--hidden {
    opacity: 0;
  }

  @media (max-width: 350px) {
    .nav {
      width: 91%;
    }
  }

  @media (min-width: 1000px) {
    .menu {
      display: none;
    }

    .nav__ul {
      position: relative;
      top: auto;

      right: auto;
      gap: 0;
      font-size: 1.069rem;
      width: initial;
      height: initial;
      transition: none;
      margin-top: initial;
      flex-direction: row;
      background-color: transparent;
    }

    .nav__ul__li {
      padding: 0 23px;
    }

    .nav__ul__li:last-child {
      padding: 0 0 0 23px;
    }

    .nav__ul__link {
      font-size: 1.125rem;
      color: var(--background);
    }
  }
</style>
